---
import Card from "../../components/Card.astro";
import Slide from "../../components/Slide.astro";
import LineChart from "../../components/LineChart.svelte";

const apiCache = {
  label: "API cached", // API Washington with cache
  data: [24, 25, 23, 24, 85, 53, 19, 33, 21, 95],
  color: `hsl(50deg 45% 61%)`,
};

const apiEdge = {
  label: "API Edge",
  borderDash: [5, 10],
  data: [38, 39, 46, 43, 114, 72, 49, 54, 38, 118],
  color: `hsl(0deg 45% 61%)`,
};

const apiUsEast = {
  label: "API Washington",
  borderDash: [15, 15],
  data: [251, 189, 239, 124, 120, 78, 116, 155, 135, 289],
  color: `hsl(112deg 45% 61%)`,
};

const apiTokyo = {
  label: "API Tokyo",
  borderDash: [1, 15],
  data: [121, 60, 152, 144, 259, 216, 256, 281, 304, 400],
  color: `hsl(292deg 45% 61%)`,
};

const ssrEdgeApiEdge = {
  label: "SSR + API Edge",
  borderDash: [5, 10],
  data: [108, 110, 99, 132, 218, 134, 139, 169, 151, 192],
  color: `hsl(${0}deg 45% 51%)`,
};

const ssrUsEastapiUsEast = {
  label: "SSR + API Washington",
  borderDash: [15, 15],
  data: [286, 227, 279, 157, 167, 108, 149, 186, 201, 348],
  color: `hsl(${112 + 90}deg 45% 61%)`,
};

const ssrUsEastapiTokyo = {
  label: "SSR Washington + API Tokyo",
  borderDash: [1, 15],
  data: [450, 361, 420, 342, 462, 292, 305, 341, 391, 550],
  color: `hsl(${292 + 90}deg 45% 61%)`,
};

const ssrEdgeApiCache = {
  label: "SSR Edge + API cached",
  data: [85, 90, 86, 89, 260, 124, 119, 155, 152, 144],
  color: `hsl(50deg 45% 61%)`,
};
---

<Slide title="Avec du cache" subtitle="Temps de réponse de l'API">
  <Card>
    <LineChart datasets={[apiCache]} client:visible />
  </Card>
</Slide>

<Slide
  title="Avec du cache"
  subtitle="Temps de réponse de l'API"
  animate={false}
>
  <Card>
    <LineChart
      datasets={[apiCache, apiEdge, apiUsEast, apiTokyo]}
      client:visible
    />
  </Card>
</Slide>

<Slide
  title="Avec du cache"
  subtitle="Temps de réponse de la page"
  animate={false}
>
  <Card>
    <LineChart
      datasets={[
        ssrUsEastapiUsEast,
        ssrUsEastapiTokyo,
        ssrEdgeApiEdge,
        ssrEdgeApiCache,
      ]}
      client:visible
    />
  </Card>
</Slide>
